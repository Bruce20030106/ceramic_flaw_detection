为解决现有瓷砖缺陷检测方法准确率低和稳定性差等问题，本文引入**基于视觉注意机制的显著性目标检测方法**，并将其运用到瓷砖表面缺陷检测的研究，开展针对纹理瓷砖表面缺陷检测的研究，实现**抗瓷砖表面纹理干扰检测**，这对于瓷砖的自动化检测发展具有重要意义，也是实现复杂纹理瓷砖在线检测的关键一步。

## [视觉注意机制](https://zhuanlan.zhihu.com/p/350760243)
根据图像的特征和任务需求，选择并集中处理具有高度相关性和重要性的区域，并忽略对任务无关的区域。

- SE注意力模块
- CBAM注意力模块
- Non-Local注意力模块。

# 1、图像采集与预处理
改进传统单尺度SSR光照校正算法和双边滤波处理进行预处理。

## [SSR](https://blog.csdn.net/weixin_39830846/article/details/88777087)
SSR (Single-scale Retinex) 算法是一种常用于图像增强的算法，其作用是**校正图像的光照不均匀现象**，**提高图像的对比度和清晰度**。

图像的光照不均匀现象是指同一张图像中不同区域的光照强度不同，导致图像细节不明显，色彩饱和度低。SSR算法通过估计图像的全局光照分量和局部反射分量来校正图像的光照不均匀现象，从而提高图像的质量。

## 双边滤波
双边滤波（Bilateral filtering）是一种常用的图像滤波方法，它**在图像去噪的同时也能够保持图像的边缘信息**。

与传统的线性滤波方法不同，双边滤波是一种非线性滤波方法。它考虑到了像素之间的距离和像素之间的灰度差异，因此能够对图像中的细节进行保留。

具体来说，双边滤波使用一个窗口在图像中移动，并计算窗口内每个像素与中心像素之间的距离和灰度值差异的加权平均值。其中，距离和灰度值差异的加权系数分别由高斯函数计算得出。这样，在保留边缘信息的同时，可以减小噪声的影响。

双边滤波的**缺点是计算量较大，因此在处理大尺寸图像时可能需要较长时间**。此外，在一些情况下，双边滤波**也可能会导致图像出现模糊或者失真的情况**。因此，需要根据具体情况进行调整和选择合适的参数。

# 2、基于视觉注意机制的瓷砖缺陷检测
结构如图：
![](https://github.com/dhf97/image/raw/main/MXKT.png)

瓷砖修饰纹理分布较为分散，其分布方差值也较大；瓷砖缺陷区域图像，分布较为集中，其分布方差值较小。因此，**通过公式计算出各类颜色的空间分布方差**后，可以根据方差大小**分配各类颜色对应的显著值**，方差越小则显著值越大。最后，对于一些小类颜色杂质像素，需要进行有效的剔除处理。

### 各类颜色像素的空间分布方差则
指某一颜色在图像中的空间分布的离散程度，反映了该颜色在图像中的分布情况，例如是否聚集在一起、是否分散等。

# 3、结果就是有效

SOD 算法模型的检测准**确率均达到了 96%以上**，说明了 SOD 算法模型的稳定检测性能。相比较于其他算法，本文研究的 SOD 缺陷检测算法更适合于复杂纹理瓷砖表面的缺陷检测，也从侧面说明了 SOD算法模型具有较低的误检、漏检率。而 ANN 算法适用于市面上大多数普通瓷砖的缺陷检测，对于本文研究的复杂纹理瓷砖检测效果在算法复杂度上有优势，但检测率欠佳。

# 4、结论
1. 改进了单通道SSR光照校正算法的数值下限选取方式，图像实现了保持边缘、降噪平滑的目的，方便图像各类颜色像素统计，有利于后续的缺陷检测实现。
2. 建立了**基于视觉注意机制的瓷砖缺陷检测模型**。通过压缩 HSV 颜色空间各通道的数量等级，实现**像素颜色种类数目的降低**，提高了瓷砖表面缺陷检测精确性和稳定性并降低了运算处理量。
3. 本文提出的缺陷检测算法针对 3 类实验复杂纹理瓷砖均达到了96%以上的综合检测率，比 SFTA 缺陷检测算法和ANN 缺陷检测算法拥有更高的检测率。